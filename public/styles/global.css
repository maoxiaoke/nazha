@import "tailwindcss";
@config "../../tailwind.config.js";

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 47.4% 11.2%;
 
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
 
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 47.4% 11.2%;
 
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
 
    --card: 0 0% 100%;
    --card-foreground: 222.2 47.4% 11.2%;
 
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
 
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
 
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
 
    --destructive: 0 100% 50%;
    --destructive-foreground: 210 40% 98%;
 
    --ring: 215 20.2% 65.1%;
 
    --radius: 0.5rem;
  }

  .dark {
    --background: 224 71% 4%;
    --foreground: 213 31% 91%;
 
    --muted: 223 47% 11%;
    --muted-foreground: 215.4 16.3% 56.9%;
 
    --accent: 216 34% 17%;
    --accent-foreground: 210 40% 98%;
 
    --popover: 224 71% 4%;
    --popover-foreground: 215 20.2% 65.1%;
 
    --border: 216 34% 17%;
    --input: 216 34% 17%;
 
    --card: 224 71% 4%;
    --card-foreground: 213 31% 91%;
 
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 1.2%;
 
    --secondary: 222.2 47.4% 11.2%;
    --secondary-foreground: 210 40% 98%;
 
    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;
 
    --ring: 216 34% 17%;
 
    --radius: 0.5rem;
  }

  body.light {
    --theme: 'light';
    --color-text: #31302e;
    --color-text-secondary: #6d6f88;
    --color-background: #fcfaf6;
    --color-nav-background: transparent;
    --color-muted: #cccfd077;
    --color-heading-primary: #34384d;
    --color-heading-secondary: #08ce3a;

    --color-link-posts: #eb3b75;

    --sc-bg: #f1f1f1;
    --sc-divider-light: rgba(140, 140, 140, 0.42);
    --sc-divider-dark: rgba(140, 140, 140, 1);

    --syntax-background: hsl(60, 0%, 96%);
    --syntax-comment: #9ca3af;
    --syntax-text: #1e1e1e;
    --syntax-operator: #0369a1;
    --syntax-string: #166534;
    --syntax-number: #b45309;
    --syntax-primary: #1e1e1e;
    --syntax-keyword: #7c3aed;
    --syntax-html-tag: #be185d;
    --syntax-boolean: #7c3aed;
  }

  body.dark {
    --theme: 'dark';
    --color-text: #dadfe7;
    --color-text-secondary: #dbdada;
    --color-background: #0f0d0c;
    --color-nav-background: #00000063;
    --color-muted: #2c2d2dbb;
    --color-heading-primary: #ffffff;
    --color-heading-secondary: #50fa7b;
    --color-link-posts: #d63369;

    --sc-bg: #111;
    --sc-divider-light: rgba(200, 200, 200, 0.12);
    --sc-divider-dark: rgba(200, 200, 200, 0.48);

    --syntax-background: hsl(60, 0%, 8.8%);
    --syntax-comment: #64748b;
    --syntax-text: #e2e8f0;
    --syntax-operator: #38bdf8;
    --syntax-string: #86efac;
    --syntax-number: #fb923c;
    --syntax-primary: #e2e8f0;
    --syntax-keyword: #c084fc;
    --syntax-html-tag: #f472b6;
    --syntax-boolean: #c084fc;
    --docsearch-searchbox-background: #283035;
    --docsearch-muted-color: #939fb4;
    --docsearch-text-color: #d3dae6;
  }

  html,
  body,
  #__next {
    @apply w-full h-full;
    --sc-width: 6px;
    /* scroll-behavior: smooth; */
  }

  html {
    font: 100%/1.75;
    font-stretch: 25% 150%;
  }

  main {
    font-family: var(--font-spectral), 'Ashbury', "PingFang SC", "PingFang TC", "Hiragino Sans GB", "Microsoft YaHei", serif;
  }

  @supports (font-variation-settings: normal) {
    html {
      font-stretch: 25% 150%;
    }
  }

  * {
    scrollbar-color: var(--sc-divider-light) var(--sc-bg);
  }

  ::-webkit-scrollbar {
    width: var(--sc-width);
  }
  ::-webkit-scrollbar:horizontal {
    height: var(--sc-width);
  }
  ::-webkit-scrollbar-track {
    background: var(--sc-bg);
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background: var(--sc-divider-light);
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: var(--sc-divider-dark);
  }

  body {
    text-rendering: optimizeLegibility;
    color: var(--color-text);
    background: var(--color-background);
    font-weight: 400;
  }

  *::selection {
    @apply bg-black text-white;
  }

  .shadow_line {
    box-shadow: inset 0 -1px 0 0 currentColor;
  }

  .link-btn {
    height: max-content;
    @apply px-1 font-light transition-colors duration-150 ease-linear rounded-sm bg-unhovered hover:bg-hovered dark:hover:bg-hovered-dark dark:hover:text-white dark:bg-unhovered-dark;
  }

  .link-tag {
    height: max-content;
    @apply px-1 font-light transition-colors duration-150 ease-linear rounded-sm bg-unhovered-tag focus:bg-hovered-tag hover:bg-hovered-tag active:bg-hovered-tag dark:active:bg-hovered-tag dark:hover:bg-hovered-tag-dark dark:focus:bg-hovered-tag-dark dark:bg-unhovered-tag-dark dark:hover:text-white;
  }

  .link-tag-selected {
    height: max-content;
    @apply px-1 font-light transition-colors duration-150 ease-linear rounded-sm bg-hovered-tag focus:bg-unhovered-tag hover:bg-unhovered-tag  dark:active:bg-unhovered-tag dark:focus:bg-unhovered-tag dark:active:bg-unhovered-tag dark:bg-hovered-tag-dark dark:hover:text-white;
  }

  .button {
    @apply p-2 border-2 border-stone-200 dark:border-stone-500;
  }

  .link {
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 180%;
    animation: gradient 8s ease infinite;
    @apply bg-iridescent;
  }

  article :is(h1, h2, h3, h4, h5, h6) {
    @apply flex mt-8 mb-5 font-semibold text-stone-800 dark:text-stone-200;
    scroll-margin-top: 5rem;
  }

  article :is(h1) {
    font-family: "PingFang SC", "PingFang TC", "Hiragino Sans GB", "Microsoft YaHei", var(--font-montserrat);
    font-weight: 500;
  }

  h2 {
    @apply text-xl;
  }
  article h3 {
    @apply text-lg;
  }

  article img {
    @apply w-full mx-auto;
  }

  article hr {
    @apply w-1/3 text-primary;
  }

  article p {
    @apply my-4;
  }

  article strong {
    @apply text-stone-800 dark:text-stone-200;
  }

  article blockquote code {
    @apply not-italic;
  }

  article :not(pre) > code {
    background: var(--syntax-background);
    white-space: nowrap;
    font-family: 'Fira Code', monospace;
    @apply rounded-sm mx-1 py-[2px] px-2 text-sm text-stone-800 dark:text-stone-200;
  }
  article :not(pre) > code::before,
  article :not(pre) > code::after {
    content: '';
  }

  article blockquote {
    @apply relative py-1 text-center;
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
    background-color: transparent;
    border-inline-start-width: 0 !important;
    font-size: 1.875rem;
    line-height: 1.45;
    font-family: 'Moderat', sans-serif;
    font-style: italic;
    font-weight: 400;
    color: #ff6654 !important;
    margin-inline: 0;
  }

  article blockquote::before {
    display: none;
  }

  article blockquote p {
    @apply my-0;
  }

  /* article li {
    @apply relative my-3 pl-7;
  }

  article li::before {
    content: '*';
    @apply absolute left-1 opacity-90;
  } */

}

article .anchor {
  padding-left: 0.5rem;
  opacity: 0;
  transition: opacity 300ms ease-in-out;
}

article :is(h2, h3, h4, h4, h6):hover .anchor {
  opacity: 0.6;
}

details {
  padding: 1rem;
  border: 2px solid #F2CFC2;
}

/* css for loading */
@keyframes loading-svg {
  0%   { cy: 10; }
  25%  { cy: 3; }
  50%  { cy: 10; }
}

.loadingCircle {
  animation-duration: 1s;
  animation-iteration-count: infinite;
  animation-name: loading-svg;
}
.loadingCircle:nth-child(2) { animation-delay: .1s }
.loadingCircle:nth-child(3) { animation-delay: .2s }

.fontOutfit {
  font-family: Outfit, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New;
}

.hr {
  display: block;
  border: none;
  height: 5px;
  background: url(/images/wave.svg) 0 repeat-x
}

/* Normalize KaTeX font size to match surrounding body text */
.katex {
  font-size: 1em !important;
}

/* Override Tailwind Typography's backtick pseudo-elements on inline code */
.prose :not(pre) > code::before,
.prose :not(pre) > code::after {
  content: '' !important;
}

/* Inline code: no bold */
.prose :not(pre) > code {
  font-weight: 400 !important;
}

/* Code block copy button */
.remark-highlight {
  position: relative;
}

.remark-highlight .copy-btn {
  position: absolute;
  top: 8px;
  right: 10px;
  opacity: 0;
  transition: opacity 150ms ease;
  font-size: 11px;
  font-family: 'Moderat', sans-serif;
  letter-spacing: 0.5px;
  color: var(--syntax-comment);
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 3px;
  line-height: 1.6;
}

.remark-highlight:hover .copy-btn {
  opacity: 1;
}

.remark-highlight .copy-btn:hover {
  color: var(--syntax-text);
}

/* Margin annotations / sidenotes */
.sidenote {
  display: block;
  margin: 0.875rem 0;
  padding-left: 0.75rem;
  border-left: 1.5px solid var(--color-muted);
  font-size: 0.8rem;
  line-height: 1.65;
  color: var(--color-text-secondary);
  font-style: normal;
  font-family: 'Moderat', sans-serif;
}

@media (min-width: 640px) {
  article blockquote {
    margin-inline: -4rem;
  }
}

.sidenote-no-border {
  border-left: none !important;
}

.footnote-ref-boxed {
  outline: 1px solid currentColor;
  outline-offset: 0px;
  border-radius: 2px;
}

/* Footnote inline annotation */
.footnote-ref {
  cursor: help;
}

@media (min-width: 1280px) {
  .sidenote {
    float: right;
    clear: right;
    width: 18rem;
    margin-right: -20rem;
    margin-left: 1.5rem;
    margin-top: 0.2rem;
    margin-bottom: 0.5rem;
    font-size: 0.7rem;
  }

}